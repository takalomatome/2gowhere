<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>List Your Property - 2goWhere</title>
  <link rel="icon" href="images/favicon-32.svg">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #1a5490 0%, #0d2f5e 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    .header {
      text-align: center;
      margin-bottom: 32px;
    }
    
    .header h1 {
      color: #1a5490;
      font-size: 32px;
      margin-bottom: 8px;
    }
    
    .header p {
      color: #666;
      font-size: 16px;
    }
    
    .form-section {
      margin-bottom: 32px;
    }
    
    .form-section h2 {
      color: #333;
      font-size: 20px;
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 2px solid #1a5490;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
    }
    
    .form-field {
      display: flex;
      flex-direction: column;
    }
    
    .form-field.full {
      grid-column: 1 / -1;
    }
    
    .form-field label {
      font-weight: 600;
      margin-bottom: 6px;
      color: #333;
      font-size: 14px;
    }
    
    .form-field label .required {
      color: #f44336;
    }
    
    .form-field input,
    .form-field select,
    .form-field textarea {
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
      transition: border-color 0.3s;
    }
    
    .form-field input:focus,
    .form-field select:focus,
    .form-field textarea:focus {
      outline: none;
      border-color: #1a5490;
      box-shadow: 0 0 0 3px rgba(26, 84, 144, 0.1);
    }
    
    .form-field textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .amenities-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 12px;
    }
    
    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .checkbox-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    
    .checkbox-item label {
      cursor: pointer;
      font-weight: normal;
      margin: 0;
    }
    
    .btn {
      padding: 14px 28px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-primary {
      background: #1a5490;
      color: white;
      width: 100%;
      margin-top: 24px;
    }
    
    .btn-primary:hover {
      background: #0d2f5e;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(26, 84, 144, 0.3);
    }
    
    .btn-primary:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    
    .status-message {
      padding: 16px;
      border-radius: 8px;
      margin-top: 16px;
      font-size: 14px;
      display: none;
    }
    
    .status-message.success {
      background: #e8f5e9;
      color: #2e7d32;
      border: 1px solid #4caf50;
      display: block;
    }
    
    .status-message.error {
      background: #ffebee;
      color: #c62828;
      border: 1px solid #f44336;
      display: block;
    }
    
    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #1a5490;
      padding: 16px;
      margin-bottom: 24px;
      border-radius: 4px;
    }
    
    .info-box h3 {
      color: #1a5490;
      margin-bottom: 8px;
      font-size: 16px;
    }
    
    .info-box p {
      color: #555;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .image-upload-area {
      border: 2px dashed #ddd;
      border-radius: 8px;
      padding: 24px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .image-upload-area:hover {
      border-color: #1a5490;
      background: #f5f5f5;
    }
    
    .image-upload-area input[type="file"] {
      display: none;
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 24px;
      }
      
      .header h1 {
        font-size: 24px;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üè® List Your Property</h1>
      <p>Join 2goWhere and reach thousands of travelers across South Africa</p>
    </div>
    
    <div class="info-box">
      <h3>üìù What happens next?</h3>
      <p>After submitting your listing, our team will review it within 24-48 hours. You'll receive an email notification once your property is approved and live on our platform.</p>
    </div>
    
    <form id="listingForm">
      <!-- Property Type Section -->
      <div class="form-section">
        <h2>Property Type</h2>
        <div class="form-grid">
          <div class="form-field">
            <label>Type <span class="required">*</span></label>
            <select name="type" required>
              <option value="">Select type...</option>
              <option value="hotel">Hotel / Accommodation</option>
              <option value="attraction">Attraction / Activity</option>
              <option value="car">Car Rental Service</option>
              <option value="mall">Shopping Mall</option>
              <option value="restaurant">Restaurant</option>
            </select>
          </div>
        </div>
      </div>
      
      <!-- Basic Information -->
      <div class="form-section">
        <h2>Basic Information</h2>
        <div class="form-grid">
          <div class="form-field full">
            <label>Property Name <span class="required">*</span></label>
            <input type="text" name="name" required placeholder="e.g., Sunset Beach Hotel">
          </div>
          
          <div class="form-field">
            <label>City <span class="required">*</span></label>
            <input type="text" name="city" required placeholder="e.g., Cape Town">
          </div>
          
          <div class="form-field">
            <label>Province <span class="required">*</span></label>
            <select name="province" required>
              <option value="">Select province...</option>
              <option value="Western Cape">Western Cape</option>
              <option value="Eastern Cape">Eastern Cape</option>
              <option value="Northern Cape">Northern Cape</option>
              <option value="Gauteng">Gauteng</option>
              <option value="KwaZulu-Natal">KwaZulu-Natal</option>
              <option value="Limpopo">Limpopo</option>
              <option value="Mpumalanga">Mpumalanga</option>
              <option value="North West">North West</option>
              <option value="Free State">Free State</option>
            </select>
          </div>
          
          <div class="form-field full">
            <label>Full Address <span class="required">*</span></label>
            <input type="text" name="location" required placeholder="Street address, suburb, postal code">
          </div>
          
          <div class="form-field full">
            <label>Description <span class="required">*</span></label>
            <textarea name="description" required placeholder="Describe your property, its features, and what makes it special..."></textarea>
          </div>
          
          <div class="form-field">
            <label>Price Range</label>
            <input type="text" name="price" placeholder="e.g., R500-R1500 per night">
          </div>
          
          <div class="form-field">
            <label>Website</label>
            <input type="url" name="website" placeholder="https://yourwebsite.com">
          </div>
        </div>
      </div>
      
      <!-- Amenities (for hotels) -->
      <div class="form-section" id="amenitiesSection" style="display:none;">
        <h2>Amenities & Features</h2>
        <div class="amenities-grid">
          <div class="checkbox-item">
            <input type="checkbox" id="wifi" value="WiFi">
            <label for="wifi">Free WiFi</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="parking" value="Parking">
            <label for="parking">Free Parking</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="pool" value="Pool">
            <label for="pool">Swimming Pool</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="gym" value="Gym">
            <label for="gym">Gym / Fitness Center</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="spa" value="Spa">
            <label for="spa">Spa & Wellness</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="restaurant" value="Restaurant">
            <label for="restaurant">Restaurant</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="bar" value="Bar">
            <label for="bar">Bar / Lounge</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="aircon" value="Air Conditioning">
            <label for="aircon">Air Conditioning</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="pets" value="Pet Friendly">
            <label for="pets">Pet Friendly</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="accessible" value="Wheelchair Accessible">
            <label for="accessible">Wheelchair Accessible</label>
          </div>
        </div>
      </div>
      
      <!-- Owner Contact Information -->
      <div class="form-section">
        <h2>Your Contact Information</h2>
        <div class="form-grid">
          <div class="form-field">
            <label>Your Name <span class="required">*</span></label>
            <input type="text" name="owner_name" required placeholder="Full name">
          </div>
          
          <div class="form-field">
            <label>Your Email <span class="required">*</span></label>
            <input type="email" name="owner_email" required placeholder="email@example.com">
          </div>
          
          <div class="form-field">
            <label>Your Phone <span class="required">*</span></label>
            <input type="tel" name="owner_phone" required placeholder="+27 xx xxx xxxx">
          </div>
        </div>
      </div>
      
      <!-- Images Upload -->
      <div class="form-section">
        <h2>Property Images</h2>
        <div class="form-field full">
          <label>Image URLs (one per line)</label>
          <textarea name="images" rows="4" placeholder="https://example.com/image1.jpg&#10;https://example.com/image2.jpg&#10;https://example.com/image3.jpg"></textarea>
          <small style="color: #666; margin-top: 4px; display: block;">Enter URLs of your property images, one per line. You can use image hosting services like Imgur or Cloudinary.</small>
        </div>
      </div>
      
      <button type="submit" class="btn btn-primary" id="submitBtn">
        Submit Listing for Review
      </button>
      
      <div id="statusMessage" class="status-message"></div>
    </form>
  </div>
  
  <script>
    const form = document.getElementById('listingForm');
    const typeSelect = form.querySelector('[name="type"]');
    const amenitiesSection = document.getElementById('amenitiesSection');
    const submitBtn = document.getElementById('submitBtn');
    const statusMessage = document.getElementById('statusMessage');
    
    // Show/hide amenities based on type
    typeSelect.addEventListener('change', () => {
      amenitiesSection.style.display = typeSelect.value === 'hotel' ? 'block' : 'none';
    });
    
    // Handle form submission
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      submitBtn.disabled = true;
      submitBtn.textContent = 'Submitting...';
      statusMessage.className = 'status-message';
      statusMessage.style.display = 'none';
      
      try {
        // Collect form data
        const formData = new FormData(form);
        const data = {};
        
        formData.forEach((value, key) => {
          data[key] = value;
        });
        
        // Collect amenities
        const amenities = [];
        document.querySelectorAll('.amenities-grid input[type="checkbox"]:checked').forEach(cb => {
          amenities.push(cb.value);
        });
        data.amenities = amenities;
        
        // Parse images
        const images = data.images ? data.images.split('\n').filter(url => url.trim()).map(url => url.trim()) : [];
        data.images = images;
        
        // Submit to serverless function
        const response = await fetch('/.netlify/functions/submit-listing', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        });
        
        const result = await response.json();
        
        if (response.ok && result.success) {
          statusMessage.className = 'status-message success';
          statusMessage.textContent = '‚úÖ ' + result.message;
          statusMessage.style.display = 'block';
          form.reset();
          
          // Scroll to message
          statusMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        } else {
          throw new Error(result.error || 'Submission failed');
        }
      } catch (error) {
        statusMessage.className = 'status-message error';
        statusMessage.textContent = '‚ùå Error: ' + error.message;
        statusMessage.style.display = 'block';
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit Listing for Review';
      }
    });
  </script>
</body>
</html>
