const OPENWEATHER_KEY=window.__OPENWEATHER_KEY__||"";const CRIMEOMETER_KEY=window.__CRIMEOMETER_KEY__||"";export async function getWeather(lat,lon){if(!OPENWEATHER_KEY)return{error:"No OpenWeather key"};const res=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${OPENWEATHER_KEY}`);if(!res.ok)return{error:"Weather fetch failed"};const j=await res.json();return{temp_c:j.main?.temp,description:j.weather?.[0]?.description}};export async function searchNearby(q,lat,lon,limit=12){const url=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q)}&limit=${limit}`;const res=await fetch(url);if(!res.ok)return{error:"Nominatim"};return await res.json()}
